<robot
  name="rover_description">
  <link
    name="base_link">
    <inertial>
      <origin
        xyz="-0.081461 0.072568 0.22578"
        rpy="0 0 0" />
      <mass
        value="0.02" />
      <inertia
        ixx="0.0017841"
        ixy="-2.5191E-21"
        ixz="-3.1496E-20"
        iyy="0.0031046"
        iyz="-3.5569E-22"
        izz="0.0013209" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://rover_description/meshes/base_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="1 1 1 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://rover_description/meshes/base_link.STL" />
      </geometry>
    </collision>
  </link>
  <link
    name="motor_right">
    <inertial>
      <origin
        xyz="0.025956 0.025203 1.9204E-06"
        rpy="0 0 0" />
      <mass
        value="0.11635" />
      <inertia
        ixx="2.1884E-05"
        ixy="-6.1285E-06"
        ixz="1.7317E-08"
        iyy="0.00012501"
        iyz="-1.7272E-10"
        izz="0.00012659" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://rover_description/meshes/motor_right.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.79216 0.81961 0.93333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://rover_description/meshes/motor_right.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="base_motor_right"
    type="fixed">
    <origin
      xyz="0.024539 -0.097801 0.074156"
      rpy="1.5708 0 3.1416" />
    <parent
      link="base_link" />
    <child
      link="motor_right" />
    <axis
      xyz="0 0 0" />
    <limit
      effort="1"
      velocity="0.05" />
  </joint>
  <link
    name="wheel_right">
    <inertial>
      <origin
        xyz="6.9389E-17 -0.0127 0"
        rpy="0 0 0" />
      <mass
        value="0.078876" />
      <inertia
        ixx="7.3551E-05"
        ixy="-5.5111E-11"
        ixz="8.4703E-21"
        iyy="0.00014131"
        iyz="-1.8331E-21"
        izz="7.3551E-05" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://rover_description/meshes/wheel_right.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.79216 0.81961 0.93333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://rover_description/meshes/wheel_right.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="motor_wheel_right"
    type="continuous">
    <origin
      xyz="-0.042 0.019 0"
      rpy="0 -1.413 -1.5708" />
    <parent
      link="motor_right" />
    <child
      link="wheel_right" />
    <axis
      xyz="0 -1 0" />
    <limit
      effort="1"
      velocity="0.5" />
  </joint>
  <link
    name="motor_left">
    <inertial>
      <origin
        xyz="0.0259564356340291 0.0252030785136685 1.92037148977198E-06"
        rpy="0 0 0" />
      <mass
        value="0.116347178526618" />
      <inertia
        ixx="2.18842342286251E-05"
        ixy="-6.12849702160094E-06"
        ixz="1.7316665159744E-08"
        iyy="0.000125012852845111"
        iyz="-1.72720823459765E-10"
        izz="0.000126587028640003" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://rover_description/meshes/motor_left.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://rover_description/meshes/motor_left.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="base_motor_left"
    type="fixed">
    <origin
      xyz="-0.18746 -0.097801 0.074156"
      rpy="1.5708 0 0" />
    <parent
      link="base_link" />
    <child
      link="motor_left" />
    <axis
      xyz="0 0 0" />
  </joint>
  <link
    name="wheel_left">
    <inertial>
      <origin
        xyz="6.9389E-17 0.0127 0"
        rpy="0 0 0" />
      <mass
        value="0.078876" />
      <inertia
        ixx="7.3551E-05"
        ixy="-5.5111E-11"
        ixz="1.4385E-20"
        iyy="0.00014131"
        iyz="-2.1806E-21"
        izz="7.3551E-05" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://rover_description/meshes/wheel_left.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.79216 0.81961 0.93333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://rover_description/meshes/wheel_left.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="motor_wheel_left"
    type="continuous">
    <origin
      xyz="-0.042 0.019 0"
      rpy="0 0 1.5708" />
    <parent
      link="motor_left" />
    <child
      link="wheel_left" />
    <axis
      xyz="0 -1 0" />
    <limit
      effort="1"
      velocity="0.5" />
  </joint>
  <link
    name="back_motor">
    <inertial>
      <origin
        xyz="0.0090666 -0.020723 -0.0039784"
        rpy="0 0 0" />
      <mass
        value=".04" />
      <inertia
        ixx="1.1747E-05"
        ixy="3.9506E-07"
        ixz="2.5818E-06"
        iyy="1.0703E-05"
        iyz="-1.0714E-07"
        izz="1.3277E-05" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://rover_description/meshes/back_motor.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.79216 0.81961 0.93333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://rover_description/meshes/back_motor.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="base_motor_back"
    type="fixed">
    <origin
      xyz="-0.075086 -0.3436 0.088656"
      rpy="-3.1416 0.64862 -1.5708" />
    <parent
      link="base_link" />
    <child
      link="back_motor" />
    <axis
      xyz="0 0 0" />
  </joint>
  <link
    name="back_wheel">
    <inertial>
      <origin
        xyz="-0.079056 0.0095567 0.035224"
        rpy="0 0 0" />
      <mass
        value="0.078876" />
      <inertia
        ixx="7.3551E-05"
        ixy="-5.5111E-11"
        ixz="3.0493E-20"
        iyy="0.00014131"
        iyz="2.6765E-21"
        izz="7.3551E-05" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://rover_description/meshes/back_wheel.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.79216 0.81961 0.93333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://rover_description/meshes/back_wheel.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="motor_back"
    type="fixed">
    <origin

      xyz="0.08 -.005 -.033"
      rpy="0 0 0" />
    <parent
      link="back_motor" />
    <child
      link="back_wheel" />
    <axis
      xyz="0 0 0" />
  </joint>

  <gazebo reference="wheel_left">
      <kp>1000.0</kp>
      <kd>1000.0</kd>
      <mu1>1</mu1>
      <mu2>1</mu2>
      <material>Gazebo/Black</material>
  </gazebo>

  <gazebo reference="wheel_right">
      <kp>1000.0</kp>
      <kd>1000.0</kd>
      <mu1>1</mu1>
      <mu2>1</mu2>
      <material>Gazebo/Black</material>
  </gazebo>

  <gazebo reference="back_wheel">
      <kp>50</kp>
      <kd>50</kd>
      <mu1>1</mu1>
      <mu2>1</mu2>
      <material>Gazebo/Black</material>
  </gazebo>

  <gazebo>
      <plugin name="diff_drive_controller" filename="libgazebo_ros_diff_drive.so">
			<alwaysOn>true</alwaysOn>
			<updateRate>100.0</updateRate>
			<leftJoint>motor_wheel_left</leftJoint>
			<rightJoint>motor_wheel_right</rightJoint>
			<!-- <wheelSeparation>${base_y_size}</wheelSeparation> -->
			<wheelDiameter>0.1016</wheelDiameter>
			<torque>100</torque>
			<publishTf>1</publishTf>
			<odometryFrame>map</odometryFrame>
			<!-- <commandTopic>/cmd_vel/teleop</commandTopic> -->
			<odometryTopic>odom</odometryTopic>
			<robotBaseFrame>base_footprint</robotBaseFrame>
			<wheelAcceleration>2.8</wheelAcceleration>
			<publishWheelJointState>true</publishWheelJointState>
			<publishWheelTF>false</publishWheelTF>
			<rosDebugDevel>Debug</rosDebugDevel>
		</plugin>
      <plugin name="gazebo_ros_control" filename="libgazebo_ros_control.so">
          <robotNamespace>/rover</robotNamespace>
      </plugin>
  </gazebo>

  <transmission name="tran1">
      <type>transmission_interface/SimpleTransmission</type>
      <joint name="motor_wheel_left">
          <hardwareInterface>VelocityJointInterface</hardwareInterface>
      </joint>
      <actuator name="motor1">
          <hardwareInterface>VelocityJointInterface</hardwareInterface>
          <mechanicalReduction>1</mechanicalReduction>
      </actuator>
  </transmission>

  <transmission name="tran2">
      <type>transmission_interface/SimpleTransmission</type>
      <joint name="motor_wheel_right">
          <hardwareInterface>VelocityJointInterface</hardwareInterface>
      </joint>
      <actuator name="motor2">
          <hardwareInterface>VelocityJointInterface</hardwareInterface>
          <mechanicalReduction>1</mechanicalReduction>
      </actuator>
  </transmission>

</robot>
